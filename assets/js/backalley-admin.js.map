{"version":3,"sources":["backalley-admin.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","obj","__esModule","metaBoxView","newObj","key","Object","prototype","hasOwnProperty","desc","defineProperty","getOwnPropertyDescriptor","get","set","_interopRequireWildcard","_base","window","state","pagenow","wpPages","editPostLocation","elements","platformUrlContainer","addEventListener","target","dataset","backalleyLocationPlatform","preventDefault","confirm","document","getElementById","remove","newPlatformButton","insertNewPlatformUrlInput","./models/MetaBox","./views/base","./views/metaBoxView","2","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","value","error","done","Promise","then","_defineProperties","props","descriptor","enumerable","configurable","writable","MetaBox","data","instance","Constructor","TypeError","_classCallCheck","this","_addNewDeliveryPlatform","protoProps","staticProps","_createClass","fn","self","args","arguments","apply","err","undefined","_asyncToGenerator","regeneratorRuntime","mark","_callee","result","wrap","_context","prev","next","jQuery","post","ajaxurl","alert","stop","3","jQueryElements","elementStrings","newPlatformDiv","querySelector","newPlatformInput","platfromUrlTemplate","platformUrlDeleteBtn","querySelectorAll","positionValues","sortableLi","4","platform","platformSlug","toLowerCase","replace","newPlatform","cloneNode","id","idFormat","removeAttribute","forEach","element","childNodes","child","nodeType","textContent","attributes","Array","from","attr","hasAttribute","insertAdjacentElement","./base"],"mappings":"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","file":"backalley-admin.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\nvar _MetaBox = _interopRequireDefault(require(\"./models/MetaBox\"));\n\nvar metaBoxView = _interopRequireWildcard(require(\"./views/metaBoxView\"));\n\nvar _base = require(\"./views/base\");\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj[\"default\"] = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n// window.elements = elements;\nvar state = {};\nwindow.state = state;\n\nif (window.pagenow === _base.wpPages.editPostLocation) {\n  // Remove Platfrom url input from DOM and thusly POST\n  _base.elements.platformUrlContainer.addEventListener('click', function (e) {\n    if (e.target.dataset.backalleyLocationPlatform) {\n      e.preventDefault();\n      var confirmationMessage = \"Are you sure you want to remove this platform? If you save after removing it, the url associated with it for this location will be permanantly deleted.\";\n\n      if (window.confirm(confirmationMessage)) {\n        document.getElementById(e.target.dataset.backalleyLocationPlatform).remove();\n      }\n    }\n  }); // Insert new Platform url input\n\n\n  _base.elements.newPlatformButton.addEventListener('click', function (e) {\n    e.preventDefault();\n    metaBoxView.insertNewPlatformUrlInput();\n  });\n}\n\n},{\"./models/MetaBox\":2,\"./views/base\":3,\"./views/metaBoxView\":4}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar MetaBox =\n/*#__PURE__*/\nfunction () {\n  function MetaBox(data) {\n    _classCallCheck(this, MetaBox);\n\n    this.data = data;\n  }\n\n  _createClass(MetaBox, [{\n    key: \"addNewDeliveryPlatform\",\n    value: function () {\n      var _addNewDeliveryPlatform = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var result;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                try {\n                  result = jQuery.post(ajaxurl, this.data);\n                  this.result = result;\n                } catch (error) {\n                  alert(error);\n                }\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function addNewDeliveryPlatform() {\n        return _addNewDeliveryPlatform.apply(this, arguments);\n      }\n\n      return addNewDeliveryPlatform;\n    }()\n  }]);\n\n  return MetaBox;\n}();\n\nexports[\"default\"] = MetaBox;\n\n},{}],3:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.wpPages = exports.jQueryElements = exports.elementStrings = exports.elements = void 0;\nvar elements = {\n  // Metabox\n  newPlatformDiv: document.querySelector('#backalley--new_platform--div'),\n  newPlatformInput: document.querySelector('#backalley--new_platform--input'),\n  newPlatformButton: document.querySelector('#backalley--new_platform--submit'),\n  platfromUrlTemplate: document.querySelector('#backalley--platform_url--dummy_markup'),\n  platformUrlContainer: document.querySelector('#backalley--platform_url--container'),\n  platformUrlDeleteBtn: document.querySelectorAll('#backalley--platform_url--delete_btn'),\n  // Sortable Object\n  positionValues: document.querySelectorAll('.position-value'),\n  sortableLi: document.querySelectorAll('.sortable--item-container')\n};\nexports.elements = elements;\nvar elementStrings = {};\nexports.elementStrings = elementStrings;\nvar jQueryElements = {};\nexports.jQueryElements = jQueryElements;\nvar wpPages = {\n  editPostLocation: 'ba_location'\n};\nexports.wpPages = wpPages;\n\n},{}],4:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.insertNewPlatformUrlInput = void 0;\n\nvar _base = require(\"./base\");\n\nvar insertNewPlatformUrlInput = function insertNewPlatformUrlInput() {\n  var platform = _base.elements.newPlatformInput.value;\n\n  if (!platform) {\n    return;\n  } // band-aid af find better solution\n\n\n  var wpSanitizeKeyRegex = /[^a-z0-9_\\-]/;\n  var platformSlug = platform.toLowerCase().replace(wpSanitizeKeyRegex, '');\n  platformSlug = platform; // Container\n\n  var newPlatform = _base.elements.platfromUrlTemplate.cloneNode(true); //   let newPlatformId = ;\n\n\n  newPlatform.id = newPlatform.dataset.idFormat.replace('%platform_name%', platformSlug);\n  newPlatform.removeAttribute('hidden');\n  newPlatform.removeAttribute('data-id-format');\n  newPlatform.querySelectorAll('*').forEach(function (element) {\n    element.childNodes.forEach(function (child) {\n      if (child.nodeType === 3) {\n        child.textContent = child.textContent.replace('%platform_title%', platform);\n      }\n    });\n\n    if (element.attributes.length > 0) {\n      Array.from(element.attributes).forEach(function (attr) {\n        attr.value = attr.value.replace('%platform_name%', platformSlug);\n        attr.value = attr.value.replace('%platform_title%', platform);\n      });\n    }\n\n    if (element.hasAttribute('disabled')) {\n      element.removeAttribute('disabled');\n    }\n  }); //    Label\n  //   let label = newPlatform.querySelector('label');\n  //   let labelFor = label.getAttribute('for').replace('%platform_name%', platformSlug);\n  //   label.textContent = platform;\n  //   label.setAttribute('for', labelFor);\n  //    Text Input\n  //   let input = newPlatform.querySelector('input');\n  //   Array.from(input.attributes).forEach(attr => {\n  //     attr.value = attr.value.replace('%platform_name%', platformSlug);\n  //   });\n  //   input.removeAttribute('disabled');\n  //    Delete Button\n  //   let deleteButton = newPlatform.querySelector('[value=\"Remove\"]');\n  //   Array.from(deleteButton.attributes).forEach(attr => {\n  //     attr.value = attr.value.replace('%platform_name%', platformSlug);\n  //   });\n  //    Hidden name=\"tax_input...\" Input\n  //   let hiddenTax = newPlatform.querySelector('[name=\"tax_input[ba_delivery_platforms][]\"]');\n  //   let hiddenTaxVal = hiddenTax.getAttribute('value').replace('%platform_title%', platform);\n  //   hiddenTax.removeAttribute('disabled');\n  //   hiddenTax.setAttribute('value', hiddenTaxVal);\n  //   console.log(newPlatform);\n\n  _base.elements.platformUrlContainer.insertAdjacentElement('beforeend', newPlatform);\n\n  _base.elements.newPlatformInput.value = '';\n};\n\nexports.insertNewPlatformUrlInput = insertNewPlatformUrlInput;\n\n},{\"./base\":3}]},{},[1]);\n"]}